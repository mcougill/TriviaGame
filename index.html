<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Totes McGoats Trivia</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
        crossorigin="anonymous">
    <link rel="stylesheet" href=./assets/css/style.css>
    <link href="https://fonts.googleapis.com/css?family=Assistant|Bangers" rel="stylesheet">
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <h1 class="text-center">Totes McGoats Trivia</h1>
        </div>
        <div class="row text-center quiz">
            <div id="time">Time</div>
            <br>
            <div id="score"></div>
            <div id="question">Question</div>
            <br>
            <button class="btn" id="start">Start</button>
            <br>
            <button class="btn btnAnswer" id="answer0" value=0>1</button>
            <br>
            <button class="btn btnAnswer" id="answer1" value=1>2</button>
            <br>
            <button class="btn btnAnswer" id="answer2" value=2>3</button>
            <br>
            <button class="btn btnAnswer" id="answer3" value=3>4</button>
            <br>
            <button class="btn" id="again">Play again?</button>
        </div>
    </div>

</body>
<script type="text/javascript">
    $(document).ready(function () {
        var correct, incorrect, questionArray, index, timeIsUp;
        //build timer
        var timer = {
            time: 30,
            count: function () {
                timer.time--;
                $("#time").html("Time Remaining: " + timer.time);
            },
            start: function () {
                $("#time").html("Time Remaining: " + timer.time);
                counter = setInterval(timer.count, 1000);
            },
            stop: function () {
                clearInterval(counter);
            },
            reset: function () {
                timer.time = 30;
            }

        }
        //put all questions & answers into an object
        triviaQuestions();
        function triviaQuestions() {
            questionArray = [{
                question: "How many breeds of goats are there?",
                answers: ["150", "25", "12", "300"],
                correctAnswer: 3
            },
            {
                question: "What chemical element gives the blood of a lobster a bluish tint?",
                answers: ["Copper", "Oxygen", "Iron", "Sulfur"],
                correctAnswer: 0
            },
            {
                question: "The llama is a domesticated camelid that is native to which continent?",
                answers: ["Australia", "South America", "Africa", "Europe"],
                correctAnswer: 1
            },
            {
                question: "What was the name of the gorilla that was shot and killed at the Cincinnati zoo in 2016 after a 3 year old boyn fell into the enclosure?",
                answers: ["Zeus", "Tony", "Cecil", "Harambe"],
                correctAnswer: 3
            },
            {
                question: "What is the name for a male bee that comes from an unfertilized egg?",
                answers: ["Drone", "Boy Bee", "Zote", "Lorx"],
                correctAnswer: 0
            },
            {
                question: "Cynophobia is the fear of what kind of animal?",
                answers: ["Cats", "Dogs", "Fish", "Spiders"],
                correctAnswer: 1
            },
            {
                question: "A flamboyance is a group of what animal?",
                answers: ["Peacocks", "Ocelots", "Flamingos", "Goats"],
                correctAnswer: 2
            },
            {
                question: "What is the national animal of Scotland?",
                answers: ["Unicorn", "Goat", "Scottie Dog", "Puffin"],
                correctAnswer: 0
            },
            {
                question: "How many hearts does an octopus have?",
                answers: ["1", "7", "3", "5"],
                correctAnswer: 2
            },
            {
                question: "What is the sleepiest animal in the world, sleeping around 22 hours each day?",
                answers: ["Cheetah", "Blue Whale", "Red Fox", "Koala"],
                correctAnswer: 3
            }
            ]
            correct = 0;
            incorrect = 0;
            index = -1;
            $("#answer0, #answer1, #answer2, #answer3,#question, #again, #score, #time").hide().off("click");

            start();

        }
        function start() {
            timer.reset();
            $("#start").on("click", function () {
                $("#time").show();
                $(".quiz").css("background-color", "rgba(250,235,215,.5)")
                proceed();

            })
        }

        function proceed() {
            index++;
            if (index < questionArray.length) {
                promptQuestion();
            }
            else {
                gameOver();
            }
        }
        function promptQuestion() {
            timer.start();
            $("#question").show().html(questionArray[index].question);
            $("#answer0").show().html(questionArray[index].answers[0]);
            $("#answer1").show().html(questionArray[index].answers[1]);
            $("#answer2").show().html(questionArray[index].answers[2]);
            $("#answer3").show().html(questionArray[index].answers[3]);
            $("#start").hide().off("click");
            clickAnswer();
        }
        function clickAnswer() {
            $(".btnAnswer").on("click", function () {
                var buttonClick = parseInt($(this).attr("value"));
                if (buttonClick === questionArray[index].correctAnswer) {
                    rightAnswer();
                }
                else {
                    wrongAnswer();
                }
            })
        }
        function rightAnswer() {
            clearTimeout(timeIsUp);
            correct++;
            timer.stop();
            timer.reset();
            $("#time").empty();
            $("#question").html("<h2>Correct!</h2>");
            $("#answer0, #answer1, #answer2, #answer3").hide().off("click");
            $("#start").show().text("Ready for next question?")
            $("#start").on("click", function () {
                proceed();
            })

        }
        function wrongAnswer() {
            clearTimeout(timeIsUp);
            incorrect++;
            timer.stop();
            timer.reset();
            $("#time").empty();
            $("#question").html("<h2>Nope!</h2>");
            $("#answer0, #answer1, #answer2, #answer3").hide().off("click");
            $("#start").show().text("Ready for next question?")
            $("#start").on("click", function () {
                proceed();
            })

        }
        function gameOver() {
            $("#question").html("<h2>Good Job!</h2>");
            $("#score").show().html("Your results: <br><br>Correct: " + correct + "<br>Incorrect: " + incorrect);
            $("#start").hide().off("click");
            $("#start").show().text("Play again?");
            $("#start").on("click", function () {
                triviaQuestions();
                $("#start").text("Let's Start");

            })
        }


    });
//
//loop over triviaQuestions object to show 1 question at a time
//indicate which answer is correct 
//if player selects correct answer, show screen congratulating them then display next question (without user input)
//if player selects incorrect answer, show user correct answer then display next question (without user input)
//if player runs out of time, tell user they ran out of time, show user correct answer then display next question (without user input)
//show user final score and ask if they want to play again
//look at timeouts and timers
</script>

</html>